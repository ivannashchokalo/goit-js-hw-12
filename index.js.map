{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport { perPage } from \"../main\";\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '53372962-e1472c27af09e15e68765cdc2';\n\nexport async function getImagesByQuery(query, page) {\n    const response = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            page: page,\n            per_page: perPage,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n        }\n    });\n\n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"; \nimport { comment, list } from \"postcss\";\nimport { refs } from \"../main\";\n\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images){\n    const markup = images.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n        return `\n        <li>\n              <a href=\"${largeImageURL}\"\n                ><img src=\"${webformatURL}\" alt=\"${tags}\" />\n                <ul>\n                  <li>\n                    <h3>Likes</h3>\n                    <p>${likes}</p>\n                  </li>\n                  <li>\n                    <h3>Views</h3>\n                    <p>${views}</p>\n                  </li>\n                  <li>\n                    <h3>comments</h3>\n                    <p>${comments}</p>\n                  </li>\n                  <li>\n                    <h3>downloads</h3>\n                    <p>${downloads}</p>\n                  </li></ul\n              ></a>\n            </li>`\n    }).join('')\n\n    refs.galleryList.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    refs.galleryList.innerHTML = '';\n}\n\nexport function showLoader() {\n    refs.loader.classList.remove('loader-hidden');\n}\n\nexport function hideLoader() {\n    refs.loader.classList.add('loader-hidden');\n}\n\nexport function showLoadMoreButton(){\n    refs.showMoreBtn.classList.remove('btn-hidden');\n}\n\nexport function hideLoadMoreButton(){\n   refs.showMoreBtn.classList.add('btn-hidden'); \n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { clearGallery, createGallery, hideLoader, hideLoadMoreButton, showLoader, showLoadMoreButton } from \"./js/render-functions\";\n\nexport const refs = {\n    form: document.querySelector('.form'),\n    galleryList: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    showMoreBtn: document.querySelector('.show-more'),\n};\n\nexport const perPage = 15;\nlet totalPages = 0;\nlet page = 1;\nlet query = '';\n\nrefs.form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    const formData = new FormData(e.target);\n    query = formData.get('search-text').trim();\n\n    page = 1;\n    hideLoadMoreButton();\n    showLoader();\n    clearGallery();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n\n        const totalHits = data.totalHits;\n        totalPages = Math.ceil(totalHits / perPage);\n   \n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n            hideLoader();\n            refs.form.reset();\n            return;\n        }\n        createGallery(data.hits);\n\n    } catch(error) {\n        console.error(error)\n    } finally {\n        showLoadMoreButton();\n        hideLoader(); \n        refs.form.reset();\n  }\n});\n\nrefs.showMoreBtn.addEventListener('click', async e => {\n    page += 1;\n\n    if (page > totalPages) {\n        iziToast.info({\n            message: `We're sorry, but you've reached the end of search results`,\n        })\n        hideLoadMoreButton();\n        return;\n    }\n\n    try {\n        const data = await getImagesByQuery(query, page);\n\n        const totalHits = data.totalHits;\n        totalPages = Math.ceil(totalHits / perPage);\n   \n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n            hideLoader();\n            refs.form.reset();\n            return;\n        }\n        createGallery(data.hits);\n\n        const firstCard = refs.galleryList.querySelector('li');\n        const cardRect = firstCard.getBoundingClientRect();\n        console.log(cardRect);\n        \n        window.scrollBy({\n            top: (cardRect.height * 2),\n            behavior: 'smooth',\n        })\n\n    } catch(error) {\n        console.error(error)\n    }\n\n})"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","axios","perPage","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","totalPages","e","data","totalHits","iziToast","error","cardRect"],"mappings":"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"}